@{
    ViewData["Title"] = "Home Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@model List<Product>
@foreach(var item in Model)
{
    <div class="col-lg-3 col-md-4 col-sm-6 mix vegetables fastfood">
        <div class="featured__item">
            <div class="featured__item__pic set-bg" data-setbg="@Url.Content("../Images/" + item.ProductImgPath)">
                <ul class="featured__item__pic__hover">
                    <li><a href="#"><i class="fa fa-heart"></i></a></li>
                    <li><a href="#"><i class="fa fa-retweet"></i></a></li>
                    <li><a href="#"><i class="fa fa-shopping-cart"></i></a></li>
                </ul>
            </div>
            <div class="featured__item__text">
                <h6><a href="#">@item.ProductName</a></h6>
                <h5>$ @item.ProductPrice</h5>
                <p>Rate: @item.PorductRate</p>
            </div>
        </div>
    </div>
}





<!-- Phân trang -->
@{
    var pageNumber = ViewBag.PageNumber ?? 1;
    var pageSize = ViewBag.PageSize ?? 8;
    var totalItems = ViewBag.TotalItems ?? 0;
    var totalPages = (int)Math.Ceiling((double)totalItems / pageSize);

    var showEllipsis = totalPages > 5;
}


<div class="pagination product__pagination">
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            @if (pageNumber > 1)
            {
                <li class="page-item">
                    <a class="page-link" href="@Url.Action("Index", new { page = pageNumber - 1 })" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="sr-only">Previous</span>
                    </a>
                </li>
            }

            @for (int j = 1; j <= 2 && j <= totalPages; j++)
            {
                if (j == pageNumber)
                {
                    <li class="page-item active"><a class="page-link" href="#">@j</a></li>
                }
                else
                {
                    <li class="page-item"><a class="page-link" href="@Url.Action("Index", new { page = j })">@j</a></li>
                }
            }

            @if (pageNumber > 3 && showEllipsis)
            {
                <li class="page-item disabled">
                    <a class="page-link">...</a>
                </li>
            }

            @for (int j = Math.Max(pageNumber - 2, 3); j <= Math.Min(pageNumber + 2, totalPages); j++)
            {
                if (j == pageNumber)
                {
                    <li class="page-item active"><a class="page-link" href="#">@j</a></li>
                }
                else
                {
                    <li class="page-item"><a class="page-link" href="@Url.Action("Index", new { page = j })">@j</a></li>
                }
            }

            @if (pageNumber < totalPages - 2 && showEllipsis)
            {
                <li class="page-item disabled">
                    <a class="page-link">...</a>
                </li>
            }

            @if (pageNumber < totalPages)
            {
                <li class="page-item">
                    <a class="page-link" href="@Url.Action("Index", new { page = pageNumber + 1 })" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                        <span class="sr-only">Next</span>
                    </a>
                </li>
            }
        </ul>
    </nav>
</div>


